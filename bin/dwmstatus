#!/bin/zsh

function batteries(){
	local STATUS=""
	for bat in $(find /sys/class/power_supply -name "BAT*"); do
		STATUS="$STATUS|$(basename $bat) $(cat $bat/capacity)%"
	done
	echo $STATUS
}
while true; do
	xsetroot -name "$(batteries) | $(date +'%H:%M:%S')"
	sleep 1s
done
